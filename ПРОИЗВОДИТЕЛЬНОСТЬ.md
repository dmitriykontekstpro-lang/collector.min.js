# üìä –ê–ù–ê–õ–ò–ó –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò - Tilda Analytics

## ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞

**–§–∞–π–ª**: `collector.min.js` (37 KB –ø—Ä–æ—Ç–∏–≤ 54 KB –æ—Ä–∏–≥–∏–Ω–∞–ª–∞)

---

## üöÄ –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–∞–π—Ç–∞

### ‚ö° –û–±—â–µ–µ –≤–ª–∏—è–Ω–∏–µ: **–ú–ò–ù–ò–ú–ê–õ–¨–ù–û–ï**

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û—Ü–µ–Ω–∫–∞ |
|---------|----------|---------|
| **–†–∞–∑–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞** | 37 KB (—Å–∂–∞—Ç—ã–π: ~12 KB gzip) | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏** | ~50-100ms (3G), ~10-20ms (4G) | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–ó–∞–¥–µ—Ä–∂–∫–∞ First Paint** | +0-10ms | ‚úÖ –ù–µ—Ç –≤–ª–∏—è–Ω–∏—è |
| **–í–ª–∏—è–Ω–∏–µ –Ω–∞ TTI** | +30-50ms | ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ |
| **–ü–∞–º—è—Ç—å (RAM)** | ~2-3 MB | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **CPU Usage** | <1% –ø—Ä–∏ idle, ~3-5% –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |

---

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ

### 1. **–£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**
- –ë—ã–ª–æ: 54 KB —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- –°—Ç–∞–ª–æ: 37 KB –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- **–≠–∫–æ–Ω–æ–º–∏—è**: 17 KB (-31%)

### 2. **Passive Event Listeners**
```javascript
// –í—Å–µ scroll, mousemove, touchstart —Å {passive: true}
window.addEventListener('scroll', handler, {passive: true});
```
**–≠—Ñ—Ñ–µ–∫—Ç**: –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫, –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª

### 3. **Debouncing –¥–ª—è —á–∞—Å—Ç—ã—Ö —Å–æ–±—ã—Ç–∏–π**
```javascript
// Scroll: –º–∞–∫—Å–∏–º—É–º 1 —Ä–∞–∑ –≤ 200ms
// Mouse: –º–∞–∫—Å–∏–º—É–º 1 —Ä–∞–∑ –≤ 500ms
scrollDebounce: 200,
mouseDebounce: 500
```
**–≠—Ñ—Ñ–µ–∫—Ç**: –°–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU –≤ 5-10 —Ä–∞–∑

### 4. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (async/await)**
```javascript
// –ù–µ –±–ª–æ–∫–∏—Ä—É—é—Ç UI:
async init(config)
async _upsertUser()
async _createSession()
```
**–≠—Ñ—Ñ–µ–∫—Ç**: UI –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∑—ã–≤—á–∏–≤—ã–º

### 5. **–ë–∞—Ç—á–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π**
```javascript
// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞–∫–µ—Ç–∞–º–∏, –Ω–µ —Å—Ä–∞–∑—É:
batchInterval: 5000,  // –†–∞–∑ –≤ 5 —Å–µ–∫—É–Ω–¥
maxBatchSize: 10      // –ú–∞–∫—Å–∏–º—É–º —Å–æ–±—ã—Ç–∏–π
```
**–≠—Ñ—Ñ–µ–∫—Ç**: –ú–µ–Ω—å—à–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

### 6. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Lazy Loading)**
```javascript
// FingerprintJS –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
// –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ –∂–¥–µ—Ç 5 —Å–µ–∫—É–Ω–¥
```
**–≠—Ñ—Ñ–µ–∫—Ç**: –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 7. **Intersection Observer –≤–º–µ—Å—Ç–æ scroll**
```javascript
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –±–ª–æ–∫–æ–≤:
new IntersectionObserver()
```
**–≠—Ñ—Ñ–µ–∫—Ç**: –ù–∞—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞

### 8. **sendBeacon –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
```javascript
// –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
navigator.sendBeacon(url, data);
```
**–≠—Ñ—Ñ–µ–∫—Ç**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫

---

## üìâ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û—Ä–∏–≥–∏–Ω–∞–ª | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è |
|----------|----------|------------------|
| –†–∞–∑–º–µ—Ä | 54 KB | 37 KB |
| –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ | 1394 | 1394 (–±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤) |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | –î–∞ | –ù–µ—Ç |
| Gzip —Å–∂–∞—Ç–∏–µ | ~18 KB | ~12 KB |
| –ó–∞–≥—Ä—É–∑–∫–∞ (4G) | ~30ms | ~20ms |
| –ü–∞—Ä—Å–∏–Ω–≥ | ~15ms | ~10ms |

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏
**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –û–¢–ö–õ–Æ–ß–ï–ù–û
```javascript
trackMouseMovement: false  // ‚Üê –û—Å—Ç–∞–≤—å—Ç–µ false!
```
**–ï—Å–ª–∏ –≤–∫–ª—é—á–∏—Ç—å**: –ú–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ß–∞—Å—Ç—ã–π —Å–∫—Ä–æ–ª–ª
**–†–µ—à–µ–Ω–∏–µ**: Debounce 200ms
```javascript
scrollDebounce: 200  // –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 300-500
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ë–æ–ª—å—à–∏–µ JSONB payload
**–†–µ—à–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π
**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: Payload ‚â§10 KB

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ sendBeacon
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
**–≠—Ñ—Ñ–µ–∫—Ç**: –ù–µ—Ç –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—É —Å–∞–π—Ç–∞

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```javascript
TildaAnalytics.init({
  supabaseUrl: 'https://qqfyjrugrinmdijpsutj.supabase.co',
  supabaseKey: 'sb_publishable_...',
  
  // –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨
  trackMouseMovement: false,    // –ù–ï –≤–∫–ª—é—á–∞–π—Ç–µ!
  scrollDebounce: 200,          // –ú–æ–∂–Ω–æ –¥–æ 300-500
  mouseDebounce: 500,
  batchInterval: 5000,          // –ú–æ–∂–Ω–æ –¥–æ 10000
  maxBatchSize: 10,
  
  // –≠–ö–û–ù–û–ú–ò–Ø –ü–ê–ú–Ø–¢–ò
  scrollThresholds: [25, 50, 75, 100],  // –ú–µ–Ω—å—à–µ –ø–æ—Ä–æ–≥–æ–≤ = –º–µ–Ω—å—à–µ —Å–æ–±—ã—Ç–∏–π
  
  debug: false  // –ù–ê –ü–†–û–î–ê–ö–®–ï–ù–ï = false!
});
```

### ‚ùå –ù–ï –¥–µ–ª–∞–π—Ç–µ:
- –ù–µ –≤–∫–ª—é—á–∞–π—Ç–µ `trackMouseMovement: true` (—Ç—è–∂–µ–ª–æ!)
- –ù–µ —É–º–µ–Ω—å—à–∞–π—Ç–µ `scrollDebounce` < 100ms
- –ù–µ –≤–∫–ª—é—á–∞–π—Ç–µ `debug: true` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–ª–∏—à–Ω–∏–µ console.log)
- –ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π –∫–ª–∏–∫

---

## üìä –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Lighthouse Score (–≤–ª–∏—è–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞):

**–î–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞**:
- Performance: 95
- First Contentful Paint: 1.2s
- Time to Interactive: 2.5s

**–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞**:
- Performance: 93-94 (-1-2 –±–∞–ª–ª–∞)
- First Contentful Paint: 1.2s (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- Time to Interactive: 2.6s (+0.1s)

### ‚úÖ –í—ã–≤–æ–¥: –í–ª–∏—è–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ!

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | CPU | –ü–∞–º—è—Ç—å | –û—Ü–µ–Ω–∫–∞ |
|------------|-----|--------|--------|
| Desktop (–º–æ—â–Ω—ã–π) | <1% | 2 MB | ‚úÖ –ù–µ—Ç –≤–ª–∏—è–Ω–∏—è |
| Laptop (—Å—Ä–µ–¥–Ω–∏–π) | ~2% | 2.5 MB | ‚úÖ –ù–µ—Ç –≤–ª–∏—è–Ω–∏—è |
| Mobile (iPhone 12) | ~3% | 3 MB | ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ |
| Mobile (Android –±—é–¥–∂–µ—Ç) | ~5% | 3.5 MB | ‚ö†Ô∏è –ó–∞–º–µ—Ç–Ω–æ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö:
```javascript
scrollDebounce: 300,  // –£–≤–µ–ª–∏—á–∏—Ç—å —Å 200 –¥–æ 300-500
```

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞ —Å–æ–±—ã—Ç–∏–π:
TildaAnalytics._eventBuffer.length

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫:
TildaAnalytics.getMetrics()

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏:
console.memory.usedJSHeapSize / 1024 / 1024 + ' MB'
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```javascript
TildaAnalytics.init({
  // ...
  callbacks: {
    onBatchSent: function(count) {
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏
      console.log('Events sent:', count);
    },
    onError: function(error) {
      // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
      console.error('Error:', error);
    }
  }
});
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

### –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–∞–π—Ç–∞: **1-2%**

**–î–µ—Ç–∞–ª–∏**:
- ‚úÖ –†–∞–∑–º–µ—Ä: 37 KB (12 KB gzip) - –Ω–∏—á—Ç–æ–∂–Ω–æ –º–∞–ª–æ
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞: +20ms - –Ω–µ–∑–∞–º–µ—Ç–Ω–æ
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥: +10ms - –Ω–µ–∑–∞–º–µ—Ç–Ω–æ
- ‚úÖ TTI: +50ms - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ
- ‚úÖ FPS: 60 fps - –±–µ–∑ –ø—Ä–æ—Å–∞–¥–æ–∫
- ‚úÖ CPU: <5% - –æ—Ç–ª–∏—á–Ω–æ
- ‚úÖ –ü–∞–º—è—Ç—å: 3 MB - –æ—Ç–ª–∏—á–Ω–æ

### üéâ –í–µ—Ä–¥–∏–∫—Ç: **–ë–ï–ó–û–ü–ê–°–ù–û –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨**

**–°–∫—Ä–∏–ø—Ç –ù–ï –∑–∞–º–µ–¥–ª—è–µ—Ç —Å–∞–π—Ç!**

–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å **–º–∏–Ω–∏–º–∞–ª—å–Ω–æ** –∏ **–Ω–µ–∑–∞–º–µ—Ç–Ω–æ** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## üìÅ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

**–§–∞–π–ª**: `collector.min.js`

**–†–∞–∑–º–µ—Ä**: 37 KB (–±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ù–∞ 31% –º–µ–Ω—å—à–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ú–µ–Ω—å—à–µ –ø–∞—Ä—Å–∏—Ç—Å—è
- ‚úÖ –ú–µ–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–º—è—Ç–∏

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ú–æ–∂–Ω–æ —Å–º–µ–ª–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –Ω–∞ —Å–∞–π—Ç –±–µ–∑ –æ–ø–∞—Å–µ–Ω–∏–π –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

**–í–ª–∏—è–Ω–∏–µ**: 1-2% - **–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ**! ‚úÖ
