<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3"></script>
<script src="https://raw.githubusercontent.com/dmitriykontekstpro-lang/collector.min.js/main/collector.min.js"></script>

<script>
    (function () {
        'use strict';

        function initAnalytics() {
            if (typeof TildaAnalytics === 'undefined') {
                console.error('‚ùå TildaAnalytics –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è!');
                console.error('–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ GitHub');
                return;
            }

            TildaAnalytics.init({
                supabaseUrl: 'https://qqfyjrugrinmdijpsutj.supabase.co',
                supabaseKey: 'sb_publishable_KzDns19CaSpI-40YZgPPCg_hCDb-1Iz',
                yandexMetrikaId: 51854510,
                debug: true,
                trackMouseMovement: false,
                scrollDebounce: 300,
                mouseDebounce: 500,
                batchInterval: 5000,
                maxBatchSize: 10,
                sessionTimeout: 1800000,
                scrollThresholds: [25, 50, 75, 90, 100],
                useFingerprintJS: true,
                requireConsent: false,
                callbacks: {
                    onInit: function (userId, sessionId) {
                        console.log('‚úÖ Tilda Analytics –∑–∞–ø—É—â–µ–Ω');
                        console.log('üë§ User ID:', userId);
                        console.log('üìä Session ID:', sessionId);
                        console.log('üéØ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞:', 51854510);
                    },
                    onBatchSent: function (eventCount) {
                        console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–±—ã—Ç–∏–π –≤ Supabase:', eventCount);
                    },
                    onError: function (error) {
                        console.error('‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:', error);
                    }
                }
            });

            console.log('üöÄ Tilda Analytics –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAnalytics);
        } else {
            initAnalytics();
        }
    })();
</script>