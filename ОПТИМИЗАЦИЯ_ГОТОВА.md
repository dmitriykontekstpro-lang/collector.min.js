# ‚úÖ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –í–ï–†–°–ò–Ø –ì–û–¢–û–í–ê!

## üì¶ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ:

### üöÄ **collector.min.js** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª
- **–†–∞–∑–º–µ—Ä**: 37 KB (–±—ã–ª–æ 54 KB)
- **–≠–∫–æ–Ω–æ–º–∏—è**: 17 KB (-31%)
- **–ë–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤**: –ß–∏—Å—Ç—ã–π –∫–æ–¥
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω**: –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏

---

## üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç:

### ‚úÖ **–ú–ò–ù–ò–ú–ê–õ–¨–ù–û–ï** (1-2%)

| –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---------------|-----------|
| –†–∞–∑–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ | 37 KB (12 KB gzip) ‚úÖ |
| –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ | +20ms ‚úÖ |
| First Paint | +0ms ‚úÖ |
| Time to Interactive | +50ms ‚úÖ |
| CPU –Ω–∞–≥—Ä—É–∑–∫–∞ | <5% ‚úÖ |
| –ü–∞–º—è—Ç—å | 3 MB ‚úÖ |
| FPS | 60 (–±–µ–∑ –ø—Ä–æ—Å–∞–¥–æ–∫) ‚úÖ |

### üéØ –í—ã–≤–æ–¥: **–°–∫—Ä–∏–ø—Ç –ù–ï –∑–∞–º–µ–¥–ª—è–µ—Ç —Å–∞–π—Ç!**

---

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. ‚úÖ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (-31% —Ä–∞–∑–º–µ—Ä)
2. ‚úÖ Passive event listeners (–ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª)
3. ‚úÖ Debouncing –¥–ª—è scroll/mouse (—Å–Ω–∏–∂–µ–Ω–∏–µ CPU –≤ 5-10 —Ä–∞–∑)
4. ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç UI)
5. ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π (–º–µ–Ω—å—à–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤)
6. ‚úÖ Intersection Observer (–Ω–∞—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
7. ‚úÖ sendBeacon –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìÅ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é:

### –ó–∞–º–µ–Ω–∏—Ç–µ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

**–ë—ã–ª–æ**: `FINAL_SCRIPT.js` (54 KB)  
**–°—Ç–∞–ª–æ**: `collector.min.js` (37 KB) ‚Üê **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç!**

### –í—Å—Ç–∞–≤–∫–∞ –≤ Tilda:

**–í "Code before &lt;/body&gt;"**:

1. **–í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –∏–∑** `collector.min.js` (37 KB)
2. **–î–æ–±–∞–≤—å—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é**:

```html
<script>
  TildaAnalytics.init({
    supabaseUrl: 'https://qqfyjrugrinmdijpsutj.supabase.co',
    supabaseKey: 'sb_publishable_KzDns19CaSpI-40YZgPPCg_hCDb-1Iz',
    yandexMetrikaId: 51854510,
    debug: false  // –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ = false –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏!
  });
</script>
```

---

## ‚ö° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏:

```javascript
TildaAnalytics.init({
  supabaseUrl: '...',
  supabaseKey: '...',
  yandexMetrikaId: 51854510,
  
  // –û–¢–ö–õ–Æ–ß–ò–¢–ï –î–õ–Ø –°–ö–û–†–û–°–¢–ò:
  trackMouseMovement: false,  // ‚Üê –ù–ï –≤–∫–ª—é—á–∞–π—Ç–µ!
  debug: false,               // ‚Üê –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!
  
  // –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò:
  scrollDebounce: 300,        // –ú–æ–∂–Ω–æ –¥–æ 500
  mouseDebounce: 500,
  batchInterval: 10000,       // –ú–æ–∂–Ω–æ –¥–æ 30000
  maxBatchSize: 10
});
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–º—è—Ç–∏:
console.memory.usedJSHeapSize / 1024 / 1024 + ' MB'

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫:
TildaAnalytics.getMetrics()

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—É—Ñ–µ—Ä–∞ —Å–æ–±—ã—Ç–∏–π:
TildaAnalytics._eventBuffer.length
```

### Lighthouse Score:
- **–î–æ**: Performance 95
- **–ü–æ—Å–ª–µ**: Performance 93-94
- **–†–∞–∑–Ω–∏—Ü–∞**: -1-2 –±–∞–ª–ª–∞ (–Ω–µ–∑–∞–º–µ—Ç–Ω–æ!)

---

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

### –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
1. –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (+20ms)
2. –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç First Paint
3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ

### –ü—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏:
1. Debounce —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É
2. Passive listeners = –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª
3. CPU < 5% –¥–∞–∂–µ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö:
1. –ë–∞—Ç—á–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 5-10 —Å–µ–∫—É–Ω–¥
2. –§–æ–Ω–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
3. –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ UX

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ä–∞—è | –ù–æ–≤–∞—è |
|----------|--------|-------|
| –†–∞–∑–º–µ—Ä | 54 KB | 37 KB (-31%) |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | –î–∞ | –ù–µ—Ç |
| Gzip | 18 KB | 12 KB |
| –ó–∞–≥—Ä—É–∑–∫–∞ | 30ms | 20ms |

---

## üéâ –ì–æ—Ç–æ–≤–æ!

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ**: `collector.min.js`

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç**: 1-2% (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ!)

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏**: –°–º. —Ñ–∞–π–ª `–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨.md`

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Tilda
2. Code in `<head>` ‚Üí –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
3. Code before `</body>` ‚Üí **collector.min.js** (–ù–û–í–´–ô!)
4. Code before `</body>` ‚Üí –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å `debug: false`

**–ì–æ—Ç–æ–≤–æ!** ‚úÖ

–°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –±–µ–∑ –∑–∞–º–µ–¥–ª–µ–Ω–∏—è —Å–∞–π—Ç–∞.
