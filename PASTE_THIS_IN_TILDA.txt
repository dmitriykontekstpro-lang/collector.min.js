/* ============================================================
   –ì–û–¢–û–í–´–ô –ö–û–î –î–õ–Ø –í–°–¢–ê–í–ö–ò –í TILDA
   –í–∞—à Supabase Project: https://qqfyjrugrinmdijpsutj.supabase.co
   ============================================================ */

// ===== –®–ê–ì 1: –í—Å—Ç–∞–≤—å—Ç–µ –≤ TILDA ‚Üí Site Settings ‚Üí Advanced ‚Üí "Code in <head>" =====

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3"></script>


// ===== –®–ê–ì 2: –í—Å—Ç–∞–≤—å—Ç–µ –≤ TILDA ‚Üí "Code before </body>" =====

<script>
/**
 * Tilda Analytics Behavioral Data Collector
 * –í–µ—Ä—Å–∏—è: 2.0.1
 * –î–∞—Ç–∞: 2025-12-22
 * 
 * –í–∞—à Supabase Project: https://qqfyjrugrinmdijpsutj.supabase.co
 */

(function() {
  'use strict';

  // =============================================================================
  // –û–°–ù–û–í–ù–û–ô –ö–û–î –ö–û–õ–õ–ï–ö–¢–û–†–ê
  // =============================================================================
  // ‚ö†Ô∏è –í–°–¢–ê–í–¨–¢–ï –°–Æ–î–ê –í–ï–°–¨ –ö–û–î –ò–ó –§–ê–ô–õ–ê FINAL_SCRIPT.js (—Å—Ç—Ä–æ–∫–∏ 10-1390)
  // –î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –∫–æ–¥ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –∑–¥–µ—Å—å
  // –û—Ç–∫—Ä–æ–π—Ç–µ FINAL_SCRIPT.js –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ—É–Ω–∫—Ü–∏–∏ (function() { ... })()
  
  // –ü–æ—Å–ª–µ –≤—Å—Ç–∞–≤–∫–∏ –∫–æ–¥–∞ –∏–∑ FINAL_SCRIPT.js –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ —Å –±–ª–æ–∫–æ–º –Ω–∏–∂–µ:
  
})(); // ‚Üê –ó–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ –æ—Ç FINAL_SCRIPT.js


// =============================================================================
// –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –° –í–ê–®–ò–ú–ò –î–ê–ù–ù–´–ú–ò
// =============================================================================

<script>
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ Supabase
  TildaAnalytics.init({
    // ===== –í–ê–®–ò –î–ê–ù–ù–´–ï SUPABASE =====
    supabaseUrl: 'https://qqfyjrugrinmdijpsutj.supabase.co',
    supabaseKey: 'sb_publishable_KzDns19CaSpI-40YZgPPCg_hCDb-1Iz',
    
    // ===== –ù–ê–°–¢–†–û–ô–ö–ò =====
    debug: true,  // ‚ö†Ô∏è –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ø–æ—Å—Ç–∞–≤—å—Ç–µ false
    
    // ID —Å—á–µ—Ç—á–∏–∫–∞ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    // yandexMetrikaId: 87654321,  // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
    
    // –ë–∞—Ç—á–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π
    batchInterval: 5000,      // –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    maxBatchSize: 10,         // –ú–∞–∫—Å–∏–º—É–º —Å–æ–±—ã—Ç–∏–π –≤ –ø–∞–∫–µ—Ç–µ
    
    // –¢–∞–π–º–∞—É—Ç—ã
    sessionTimeout: 1800000,  // 30 –º–∏–Ω—É—Ç
    
    // –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    trackMouseMovement: false, // –û—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
    scrollDebounce: 200,
    mouseDebounce: 500,
    
    // –ü–æ—Ä–æ–≥–∏ —Å–∫—Ä–æ–ª–ª–∞
    scrollThresholds: [25, 50, 75, 90, 100],
    
    // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    useFingerprintJS: true,   // –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
    
    // GDPR
    requireConsent: false,     // –í–∫–ª—é—á–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ cookies
    
    // Callbacks (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    callbacks: {
      onInit: function(userId, sessionId) {
        console.log('‚úÖ Tilda Analytics –∑–∞–ø—É—â–µ–Ω');
        console.log('User ID:', userId);
        console.log('Session ID:', sessionId);
      },
      onBatchSent: function(eventCount) {
        console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–±—ã—Ç–∏–π:', eventCount);
      },
      onError: function(error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:', error);
      }
    }
  });
</script>


/* ============================================================
   –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ:
   
   1. –í–ê–ñ–ù–û! –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase:
      - –û—Ç–∫—Ä–æ–π—Ç–µ https://app.supabase.com
      - –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç qqfyjrugrinmdijpsutj
      - SQL Editor ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
      - –°–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ —Ñ–∞–π–ª–µ QUICKSTART.md ‚Üí –®–∞–≥ 4
   
   2. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –≤ Tilda:
      - "Code in <head>" ‚Üí –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Supabase –∏ FingerprintJS
      - "Code before </body>" ‚Üí –∫–æ–¥ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ + –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
   
   3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:
      - –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
      - –ù–∞–∂–º–∏—Ç–µ F12 (–∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞)
      - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: "‚úÖ Tilda Analytics –∑–∞–ø—É—â–µ–Ω"
   
   4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Supabase:
      - Table Editor ‚Üí events
      - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ —Å event_type: 'page_view'
   
   5. –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
      - –ò–∑–º–µ–Ω–∏—Ç–µ debug: false –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
      - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ —Å–∞–π—Ç
   
   ============================================================ */
